@using TSMT.Models
@model TSMT.Models.Car
@{
    ViewBag.Title = "EditCar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="title_of_page">Edit Car</h2>
 <script type="text/javascript" src="~/Content/js/jquery.js"></script>
    <script type="text/javascript">
        function callAjax(id) {
            if (id == 0) {
                $("#asd").html("");
            }
            else {
                $.ajax({
                    url: 'ResultAjax',
                    data: { "id": id },
                    type: 'GET',
                    success: function (results) {
                        $("#asd").html("");
                        $("#asd").append("<option >-----</option>");
                        for (i in results) {
                            var r = results[i];
                            $("#asd").append("<option value=\"" + r.value + "\">" + r["name"] + "</option>");

                        }
                    }
                });
            }
        }


        function callAjaxCharityid(id) {
            if (id == 0) {
                $("#charityid").html("");
            }
            else {
                $.ajax({
                    url: 'ResultAjaxCharityid',
                    data: { "id": id },
                    type: 'GET',
                    success: function (results) {
                        $("#charityid").html("");
                        for (i in results) {
                            var r = results[i];
                            $("#charityid").val(r["charityid"]);

                        }
                    }
                });
            }
        }
         </script>
@using (Html.BeginForm("EditCar", "Sponsor", FormMethod.Post))
{
    <input type="hidden" name="carId" value="@Model.CarID"/>
    <table>
        <tr>
             <td>Tài Trợ Cho: </td>
                <td>
                    <select id="qwe" onchange="callAjax(this.value)" class="form-control">
                        <option value="0" selected  >---</option>
                        @foreach (var item in ViewData["Exam"] as IEnumerable<Examination>)
                        {
                            if (Model.CharityExamID == null)
                            { 
                                 <option value="@item.ExaminationID">@item.Name</option>
                            }
                            else
                            {
                                if (item.ExaminationID == Model.ChairitiesExam.Examination.ExaminationID)
                                {
                                <option value="@item.ExaminationID" selected="selected">@item.Name</option>
                                }
                                else
                                {
                                <option value="@item.ExaminationID">@item.Name</option>
                                }
                            }
                            
                        }
                    </select>
                </td>
                <td>Tổ Chức: </td>
                <td>
                    <select id="asd" name="asd" onchange="callAjaxCharityid(this.value)" class="form-control" >
                         
                            
                      
                    </select>
                </td>
                <input type="hidden"  name ="charityid" id ="charityid" />
        </tr>
        <tr>
            <td>Biển số xe</td>
            <td>
                <input type="text" name="NumberPlate" value="@Model.NumberPlate"  readonly="true" class="form-control"/></td>
        </tr>
        <tr>
            <td>Tổng số chỗ ngồi</td>
            <td>
                <input type="text" name="TotalSlots" value="@Model.TotalSlots"  readonly="true" class="form-control"/></td>
        </tr>
         <tr>
            <td>Tên tài xế</td>
            <td>
                <input type="text" name="DriverName" value="@Model.DriverName"  readonly="true" class="form-control"/></td>
        </tr>
         <tr>
            <td>Số điện thoại tài xế</td>
            <td>
                <input type="text" name="DriverPhone" value="@Model.DriverPhone"  readonly="true" class="form-control"/></td>
        </tr>
        <tr>
            <td colspan="2">
               <input type="button" class = "btn btn-info" onclick="history.go(-1);" value="Quay lại"/>
                <input type="submit" value="Submit" class="btn btn-info" />
                <input type="reset" value="Reset" class="btn btn-info" />
            </td>
        </tr>
    </table>
}