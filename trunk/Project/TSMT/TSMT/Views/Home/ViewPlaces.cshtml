@{
    Layout = null;
}

@model TSMT.Models.ExaminationsPaper

<title>Bản đồ địa chỉ thi và địa chỉ trọ của thí sinh @Model.Candidate.Account.Profile.Lastname @Model.Candidate.Account.Profile.Firstname - @Model.UniversitiesExamination.Examination.Name</title>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<style type="text/css">
    html, body
    {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    #map_canvas
    {
        width: 100%;
        height: 100%;
    }
    #closePopup
    {
        padding: 6px 13px;
        color: #fff !important;
        background: #3498db !important;
        border:0px;
    }
    #closePopup:hover
    {
        cursor:pointer;
        background: #2980b9 !important;
    }
</style>
<button id="closePopup" onclick="window.close()">Đóng bản đồ lại</button>
<div id="map_canvas"></div>
<script type="text/javascript">
    function initialize() {
        var lodge = new google.maps.LatLng("@Model.Lodge.Latitude", "@Model.Lodge.Longitude");
        var venue = new google.maps.LatLng("@Model.Venue.Latitude", "@Model.Venue.Longitude");
        var map_options = {
            center: lodge,
            zoom: 16,
            panControl: false,
            mapTypeControl: false,
            streetViewControl: false,
        }
        var map = new google.maps.Map(document.getElementById('map_canvas'), map_options);
     
        var lodgeMarker = new google.maps.Marker({
            map: map,
            position: lodge,
            animation: google.maps.Animation.DROP,
            icon: '/Content/img/markers/blue-dot.png'
        });
        var venueMarker = new google.maps.Marker({
            map: map,
            position: venue,
            animation: google.maps.Animation.DROP
        });

        var bounds = new google.maps.LatLngBounds();
        bounds.extend(lodge);
        bounds.extend(venue);
        map.fitBounds(bounds);

        var infoWindows = [];
        infoWindows['lodge'] = new google.maps.InfoWindow({ content: '<strong>Địa điểm trọ: </strong> @Model.Lodge.Address' });
        infoWindows['venue'] = new google.maps.InfoWindow({ content: '<strong>Địa điểm thi: </strong> @Model.Venue.Address' })

        google.maps.event.addListener(lodgeMarker, 'mouseover', function () {
            infoWindows['lodge'].open(map, lodgeMarker);
        });

        google.maps.event.addListener(venueMarker, 'mouseover', function () {
            infoWindows['venue'].open(map, venueMarker);
        });

        map.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById('closePopup'));
    }
    google.maps.event.addDomListener(window, 'load', initialize);
</script>