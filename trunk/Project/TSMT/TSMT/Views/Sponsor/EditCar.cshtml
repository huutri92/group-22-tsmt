@using TSMT.Models
@model TSMT.Models.Car
@{
    ViewBag.Title = "Tài trợ xe";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Breadcrumbs {
    <!--=== Breadcrumbs ===-->
    <div class="breadcrumbs margin-bottom-40">
        <div class="container">
            <h1 class="pull-left">@ViewBag.Title</h1>
            <ul class="pull-right breadcrumb">
                <li><a href="@Url.Action("Index", "Home")">Trang Chủ</a></li>
                <li><a href="@Url.Action("Index", "Sponsor")">Nhà tài trợ</a></li>
                <li><a href="@Url.Action("ManageCar", "Sponsor")">Quản Lý Xe</a></li>
                <li class="active">@ViewBag.Title</li>
            </ul>
        </div>
    </div>
}
@Html.Partial("_SponsorSidebarPartial")

<script type="text/javascript" src="~/Content/js/jquery.js"></script>
<script type="text/javascript">
    function callAjax(id) {
        if (id == 0) {
            $("#asd").html("");
        }
        else {
            $.ajax({
                url: 'ResultAjax',
                data: { "id": id },
                type: 'GET',
                success: function (results) {
                    $("#asd").html("");
                    $("#asd").append("<option >-----</option>");
                    for (i in results) {
                        var r = results[i];
                        $("#asd").append("<option value=\"" + r.value + "\">" + r["name"] + "</option>");

                    }
                }
            });
        }
    }


    function callAjaxCharityid(id) {
        if (id == 0) {
            $("#charityid").html("");
        }
        else {
            $.ajax({
                url: 'ResultAjaxCharityid',
                data: { "id": id },
                type: 'GET',
                success: function (results) {
                    $("#charityid").html("");
                    for (i in results) {
                        var r = results[i];
                        $("#charityid").val(r["charityid"]);

                    }
                }
            });
        }
    }
</script>
<div class="col-md-9">
    <div class="panel panel-green margin-bottom-20">
        <div class="panel-heading">
            <h3 class="panel-title"><i class="icon-list"></i>Chỉnh sửa thông tin xe
            </h3>
        </div>
        @using (Html.BeginForm("EditCar", "Sponsor", FormMethod.Post))
        {
            <div class="panel-body">
                <input type="hidden" name="carId" value="@Model.CarID"/>
                <table class="table table-hover">
                    <tr>
                        <td style="vertical-align: middle">Tài Trợ Cho: </td>
                        <td>
                            <select id="qwe" onchange="callAjax(this.value)" class="form-control">
                                <option value="0" selected>---</option>
                                @foreach (var item in ViewData["Exam"] as IEnumerable<Examination>)
                                {
                                    if (Model.CharityExamID == null)
                                    { 
                                    <option value="@item.ExaminationID">@item.Name</option>
                                    }
                                    else
                                    {
                                        if (item.ExaminationID == Model.ChairitiesExam.Examination.ExaminationID)
                                        {
                                    <option value="@item.ExaminationID" selected="selected">@item.Name</option>
                                        }
                                        else
                                        {
                                    <option value="@item.ExaminationID">@item.Name</option>
                                        }
                                    }

                                }
                            </select>
                        </td>
                        <td style="vertical-align: middle">Tổ Chức: </td>
                        <td>
                            <select id="asd" name="asd" onchange="callAjaxCharityid(this.value)" class="form-control">
                            </select>
                        </td>
                        <input type="hidden" name="charityid" id="charityid" />
                    </tr>
                    <tr>
                        <td>Biển số xe</td>
                        <td>
                            <input type="text" name="NumberPlate" value="@Model.NumberPlate"  readonly="true" class="form-control"/></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Tổng số chỗ ngồi</td>
                        <td>
                            <input type="text" name="TotalSlots" value="@Model.TotalSlots"  readonly="true" class="form-control"/></td>

                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Tên tài xế</td>
                        <td>
                            <input type="text" name="DriverName" value="@Model.DriverName"  readonly="true" class="form-control"/></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Số điện thoại tài xế</td>
                        <td>
                            <input type="text" name="DriverPhone" value="@Model.DriverPhone"  readonly="true" class="form-control"/></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            @Html.ActionLink("Quay lại", "ManageCar", null, new { @class = "btn btn-info" })
                            <input type="submit" value="Tài Trợ" class="btn btn-info" />
                            <input type="reset" value="Làm Mới" class="btn btn-info" />
                        </td>
                    </tr>
                </table>
            </div>
        }
    </div>
</div>
