@using TSMT.Models
@model IEnumerable<Car>
@{
    ViewBag.Title = "Quản lý xe";
    ViewBag.Active = "ManageCar";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Breadcrumbs {
    <!--=== Breadcrumbs ===-->
    <div class="breadcrumbs margin-bottom-40">
        <div class="container">
            <h1 class="pull-left">@ViewBag.Title</h1>
            <ul class="pull-right breadcrumb">
                <li><a href="@Url.Action("Index", "Home")">Trang Chủ</a></li>
                <li><a href="@Url.Action("Index", "Sponsor")">Nhà tài trợ</a></li>
                <li class="active">@ViewBag.Title</li>
            </ul>
        </div>
    </div>
}
@Html.Partial("_SponsorSidebarPartial")



<div class="col-md-9">
    <div class="panel panel-green margin-bottom-20">
        <div class="panel-heading">
            <h3 class="panel-title"><i class="icon-list"></i>Quản lý xe
                <a href="@Url.Action("AddCar", "Sponsor")" class="btn-u btn-u-green"><i class="icon-pencil"></i>Create</a>
            </h3>
        </div>
        <div class="panel-body">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>STT</th>
                        <th>Kỳ thi</th>
                        <th>Tổ chức</th>
                        <th>Biển số xe</th>
                        <th>Tổng số chỗ</th>
                        <th>Số chỗ trọ còn trống</th>
                        <th>Tên tài xế</th>
                        <th>SĐT tài xế</th>

                        <th>Trạng thái</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int counter = 1;

                        foreach (var item in Model)
                        {
                        <tr>
                            <td>@counter</td>
                            @if (@item.CharityExamID == null)
                            {
                                <td>#Trống#</td>
                                <td>#Trống#</td>
                            }
                            else
                            {
                                <td>@item.ChairitiesExam.Examination.Name</td>
                                <td>@item.ChairitiesExam.CharityExamName</td>
                            }
                            <td>@item.NumberPlate</td>
                            <td>@item.TotalSlots</td>
                            <td>@item.AvailableSlots</td>
                            <td>@item.DriverName</td>
                            <td>@item.DriverPhone</td>

                            @if (item.CharityExamID == null)
                            {
                                <td><span class="label label-info">Chưa Tài Trợ</span></td>
                                <td>
                                    @Html.ActionLink("Edit", "EditCar", new { carId = @item.CarID })
                                    @Html.ActionLink("Delete", "DeleteCar", new { carId = @item.CarID }, new { onclick = "return showPopup('Are you sure to delete it?', this.href);" })
                                </td>
                            
                            }
                            else
                                if (!item.IsApproved)
                                {
                                <td><span class="label label-danger">Chờ Nhận</span></td>
                                <td>
                                    @Html.ActionLink("Edit", "EditCar", new { carId = @item.CarID })
                                    @Html.ActionLink("Delete", "DeleteCar", new { carId = @item.CarID }, new { onclick = "return showPopup('Are you sure to delete it?', this.href);" })
                                </td>
                                }
                                else
                                {
                                <td><span class="label label-success">Đã Tài Trợ</span></td>
                                <td></td>
                                }


                        </tr>
                            ++counter;
                        }
                    }
                </tbody>
            </table>
            @Html.ActionLink("Back to Index", "Index", null, new { @class = "btn btn-info" })

        </div>
    </div>
</div>

<script>
    function func() {
        var cusid_ele = document.getElementsByClassName('edit_class');
        for (var i = 0; i < cusid_ele.length; ++i) {

            if (cusid_ele[i].innerHTML == "True") {
                cusid_ele[i].innerHTML = "Online";
            }
            if (cusid_ele[i].innerHTML == "False") {
                cusid_ele[i].innerHTML = "Tận tay";
            }
        }
    }
    func();
</script>
