@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Tạo mới thông tin cho trường ĐHCĐ";
}

<link href="/Content/css/TSMTValidation.css" rel="stylesheet">
<script type="text/javascript" src="/Content/js/TSMTValidation.js"></script>
<link href="/Content/css/TSMTAddress.css" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,places&sensor=false"></script>
<script src="/Content/js/TSMTAddress.js"></script>

@section Breadcrumbs {
    <!--=== Breadcrumbs ===-->
    <div class="breadcrumbs margin-bottom-40">
        <div class="container">
            <h1 class="pull-left">@ViewBag.Title</h1>
            <ul class="pull-right breadcrumb">
                <li><a href="@Url.Action("Index", "Home")">Trang Chủ</a></li>
                <li><a href="@Url.Action("Index", "Admin")">Admin</a></li>
                <li><a href="@Url.Action("ManageUniversity", "Admin")">Quản lý thông tin trường ĐHCĐ</a></li>
                <li class="active">@ViewBag.Title</li>
            </ul>
        </div>
    </div>
}
@Html.Partial("_AdminSidebarPartial")

@using (Html.BeginForm("AddUniversity", "Admin", FormMethod.Post, new { id = "FormAddUniversity" }))
{
    <div class="col-md-9">
        <div class="panel panel-red margin-bottom-20">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="icon-list"></i>Tạo mới thông tin cho trường Đại học / Cao đẳng
                </h3>
            </div>
            <div class="panel-body">
                <table class="table">
                    <tr>
                        <td style="vertical-align: middle;max-width:100px" >Tên trường<span class="required">*</span></td>
                        <td>
                            <input type="text" id="Name" name="Name" class="form-control" /></td>
                    </tr>
                    <tr>
                        <td style="vertical-align: middle">Địa chỉ<span class="required">*</span></td>
                        <td>
                            <input type="text" id="Address" name="Address" class="form-control" /></td>
                    </tr>
                    <tr>
                        <td style="vertical-align: middle">Mã trường<span class="required">*</span></td>
                        <td>
                            <input type="text" id="UniversityCode" name="UniversityCode" class="form-control" style="width:100px" /></td>
                    </tr>
                    <tr>
                        <td style="vertical-align: middle">Website</td>
                        <td>
                            <input type="text" id="Website" name="Website" class="form-control" style="width:250px"/></td>
                    </tr>
                    <tr>
                        <td style="vertical-align: middle">Số điện thoại</td>
                        <td>
                            <input type="text" id="Phone" name="Phone" class="form-control" style="width:250px"/></td>
                    </tr>

                </table>
            </div>
        </div>
        @*<input type="submit" value="Thêm"  class="btn-u btn-u-sea"/>*@
        @*<a href="@Url.Action("", "", new { id =  })" class="btn-u btn-u-sea"><i class="icon-plus"></i>&nbsp;Thêm</a>*@
        <div style="float: right">
            @*<input type="reset" value="Reset" class="btn btn-info" />*@
            <button type="submit" class="btn-u btn-u-default"><i class="icon-plus"></i>&nbsp;Tạo</button>
            <button type="reset" class="btn-u btn-u-blue"><i class="icon-eraser"></i>&nbsp;Làm lại</button>
        </div>

        <button type="button" class="btn-u btn-u-sea" onclick="location.href = '/admin/ManageUniversity'"><i class="icon-chevron-sign-left" ></i>&nbsp;Quay lại </button>
       @* <input type="button" value="Cancel" class="btn btn-info" onclick="location.href = '/admin/ManageUniversity'" />*@
           @*<a href="@Url.Action("ManageUniversity", "Admin")" class="btn-u btn-u-sea"><i class="icon-chevron-sign-left" onclick="location.href = '/admin/ManageUniversity'"></i>&nbsp;Quay lại </a>*@
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        initialize();
        $("#Name").blur(function () {checkEmpty("Name")});
	    $("#Address").blur(function(){checkEmpty("Address")});
	    $("#UniversityCode").blur(function () { CheckUniversityCode("UniversityCode", "Mã trường đã tồn tại trong hệ thống! Vui lòng kiểm tra lại.", true) });
	    $("#FormAddUniversity").submit(function (e) {
	        var isValidated = true;
	        isValidated = checkEmpty("Name") && isValidated;
	        isValidated = checkEmpty("Address") && isValidated;
	        isValidated = CheckUniversityCode("UniversityCode", "Mã trường đã tồn tại trong hệ thống! Vui lòng kiểm tra lại.", true) && isValidated;
	        if (isValidated) return true;
	        e.preventDefault();
	    });
    });

    function CheckUniversityCode(id, msg, required) {
        var e = document.getElementById(id);
        if (checkEmpty(id)) {
            var isNotExisted = false;
            $.ajax({
                url: '/admin/CheckUniversityCode/',
                data: { code: e.value},
                type: 'POST',
                async: false,
                success: function (results) {
                    if (results.success == true) {
                        isNotExisted = results.isNotExisted;
                    }
                }
            });
            if (!isNotExisted) {
                createValMsg(e, msg);
                return false;
            } else return true;
        } else return !required;
    }
</script>